# CI module for PyDCC
#
# Copyright (c) Siemens AG, 2021
#
# Authors:
#  Andreas Tobola <andreas.tobola@siemens.com>
#
# This work is licensed under the terms of the MIT License. 
# See the LICENSEle in the top-level directory.
#

# https://hub.docker.com/r/library/python/tags/
image: "python:3.7" 

before_script:
  - python --version
#  - pip install pylint

stages:
#  - Static Analysis
  - Unit Tests
  - Version Increment

#pylint:
#  stage: Static Analysis
#  script:
#  - pylint src/*.py

test:
  stage: Unit Tests
  script:
  - pip install -e .    
  - cd tests
  - python unit_test.py
  - git config user.email "cipipeline@gitlab.com"
  - git config user.name "CI Pipeline"
  - git add next_version.txt
  - git commit -m "Increment for next version."

vincr:
  stage: Version Increment
  script:
  - python increase_version.py
